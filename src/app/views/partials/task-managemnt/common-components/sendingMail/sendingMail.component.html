<!-- Modal Backdrop -->
<div
  class="tw-fixed tw-inset-0 tw-bg-black tw-bg-opacity-50 tw-flex tw-items-center tw-justify-center tw-z-50 tw-transition-opacity tw-duration-300"
  [class.tw-opacity-100]="isVisible"
  [class.tw-opacity-0]="!isVisible"
  *ngIf="isVisible"
>
  <!-- Modal Container -->
  <div
    class="tw-bg-white tw-rounded-xl tw-shadow-2xl tw-w-full tw-max-w-md tw-mx-4 tw-transform tw-transition-all tw-duration-300"
    [class.tw-scale-100]="isVisible"
    [class.tw-scale-95]="!isVisible"
  >
    <!-- Close Button -->
    <button
      class="tw-absolute tw-top-4 tw-right-4 tw-p-2 tw-text-gray-400 hover:tw-text-gray-600 tw-transition-colors tw-rounded-full hover:tw-bg-gray-100"
      *ngIf="!isAnimating"
      (click)="onClose()"
      type="button"
    >
      <svg class="tw-w-6 tw-h-6" viewBox="0 0 24 24" fill="none">
        <path
          d="M18 6L6 18M6 6L18 18"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
        />
      </svg>
    </button>

    <!-- Header -->
    <div class="tw-p-6 tw-pb-4">
      <h2 class="tw-text-2xl tw-font-bold tw-text-gray-900 tw-mb-1">
        Sending Invitation
      </h2>
      <p class="tw-text-gray-600">Reinviting team member</p>
    </div>

    <!-- Content -->
    <div class="tw-px-6 tw-pb-6">
      <!-- Member Info -->
      <div
        class="tw-flex tw-items-center tw-space-x-4 tw-mb-8 tw-p-4 tw-bg-gray-50 tw-rounded-lg"
      >
        <div class="tw-relative">
          <img
            class="tw-w-12 tw-h-12 tw-rounded-full tw-object-cover tw-border-2 tw-border-white tw-shadow-sm"
            [src]="baseURL + '/' + member.profileImage"
            [alt]="member.name"
          />
          <div
            class="tw-absolute tw--bottom-1 tw--right-1 tw-w-4 tw-h-4 tw-rounded-full tw-border-2 tw-border-white"
            [class.tw-bg-green-500]="member.isVerified"
            [class.tw-bg-gray-300]="!member.isVerified"
          ></div>
        </div>
        <div class="tw-flex-1">
          <h3 class="tw-font-semibold tw-text-gray-900">{{ member.name }}</h3>
          <p class="tw-text-sm tw-text-gray-600 tw-mb-1">
            {{ member.emailId }}
          </p>
          <span
            class="tw-inline-block tw-px-2 tw-py-1 tw-text-xs tw-font-medium tw-bg-blue-100 tw-text-blue-800 tw-rounded-full"
          >
            {{ member.role | titlecase }}
          </span>
        </div>
      </div>

      <!-- Animation Container -->
      <div class="tw-text-center tw-py-8">
        <!-- Sending Animation -->
        <div class="tw-space-y-4" *ngIf="isAnimating && !showSuccess">
          <!-- Envelope Animation -->
          <div class="tw-relative tw-inline-block">
            <div
              class="tw-w-16 tw-h-12 tw-bg-blue-500 tw-rounded-sm tw-relative tw-animate-bounce"
            >
              <!-- Envelope body -->
              <div
                class="tw-absolute tw-inset-0 tw-bg-blue-500 tw-rounded-sm"
              ></div>
              <!-- Envelope flap -->
              <div
                class="tw-absolute tw-top-0 tw-left-0 tw-right-0 tw-h-6 tw-bg-blue-600 tw-rounded-sm tw-transform tw-origin-top"
              ></div>
              <!-- Letter inside -->
              <div
                class="tw-absolute tw-inset-2 tw-bg-white tw-rounded-sm tw-opacity-80"
              >
                <div class="tw-space-y-1 tw-p-1">
                  <div class="tw-h-1 tw-bg-gray-300 tw-rounded"></div>
                  <div class="tw-h-1 tw-bg-gray-300 tw-rounded tw-w-3/4"></div>
                  <div class="tw-h-1 tw-bg-gray-300 tw-rounded tw-w-1/2"></div>
                </div>
              </div>
            </div>
          </div>

          <!-- Loading dots -->
          <div class="tw-flex tw-justify-center tw-space-x-1">
            <div
              class="tw-w-2 tw-h-2 tw-bg-blue-500 tw-rounded-full tw-animate-pulse"
            ></div>
            <div
              class="tw-w-2 tw-h-2 tw-bg-blue-500 tw-rounded-full tw-animate-pulse"
              style="animation-delay: 0.2s"
            ></div>
            <div
              class="tw-w-2 tw-h-2 tw-bg-blue-500 tw-rounded-full tw-animate-pulse"
              style="animation-delay: 0.4s"
            ></div>
          </div>

          <p class="tw-text-gray-600 tw-font-medium">Sending invitation...</p>
        </div>

        <!-- Success Animation -->
        <div class="tw-space-y-4" *ngIf="showSuccess">
          <div class="tw-inline-block tw-animate-bounce">
            <svg class="tw-w-16 tw-h-16" viewBox="0 0 64 64" fill="none">
              <circle
                cx="32"
                cy="32"
                r="30"
                fill="#10B981"
                class="tw-animate-pulse"
              />
              <path
                d="M20 32L28 40L44 24"
                stroke="white"
                stroke-width="3"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
            </svg>
          </div>
          <div>
            <h3 class="tw-text-xl tw-font-bold tw-text-green-600 tw-mb-2">
              Invitation Sent!
            </h3>
            <p class="tw-text-gray-600">
              {{ member.name }} will receive the invitation shortly
            </p>
          </div>
        </div>

        <!-- Initial State -->
        <div class="tw-space-y-4" *ngIf="!isAnimating && !showSuccess">
          <div class="tw-inline-block tw-p-4 tw-bg-blue-50 tw-rounded-full">
            <svg
              class="tw-w-12 tw-h-12 tw-text-blue-500"
              viewBox="0 0 48 48"
              fill="none"
            >
              <rect
                x="4"
                y="12"
                width="40"
                height="28"
                rx="4"
                fill="currentColor"
                opacity="0.1"
              />
              <path
                d="M8 16L24 28L40 16"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
              />
              <rect
                x="4"
                y="12"
                width="40"
                height="28"
                rx="4"
                stroke="currentColor"
                stroke-width="2"
              />
            </svg>
          </div>
          <p class="tw-text-gray-600 tw-font-medium">
            Ready to send invitation
          </p>
        </div>
      </div>
    </div>

    <!-- Footer -->
    <div
      class="tw-flex tw-justify-end tw-space-x-3 tw-px-6 tw-py-3 tw-border-t tw-border-gray-100"
      *ngIf="!isAnimating"
    >
      <button
        class="tw-px-4 tw-py-2 tw-text-gray-700 tw-border tw-border-gray-300 tw-rounded-lg hover:tw-bg-gray-50 tw-transition-colors tw-font-medium"
        (click)="onClose()"
        type="button"
      >
        Cancel
      </button>
      <button
        class="tw-px-6 tw-py-2 tw-bg-blue-600 tw-text-white tw-rounded-lg hover:tw-bg-blue-700 tw-transition-colors tw-font-medium tw-disabled:opacity-50 tw-disabled:cursor-not-allowed"
        (click)="startAnimation()"
        type="button"
        *ngIf="!showSuccess"
        [disabled]="isAnimating"
      >
        Send Invitation
      </button>
    </div>
  </div>
</div>
