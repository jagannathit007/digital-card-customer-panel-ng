<!-- Dashboard Header -->
<div class="tw-bg-white tw-border-b tw-border-gray-200 tw-p-6">
  <div class="tw-flex tw-items-center tw-gap-4">
    <div
      class="tw-w-10 tw-h-10 tw-bg-blue-600 tw-rounded tw-flex tw-items-center tw-justify-center"
    >
      <svg
        class="tw-w-6 tw-h-6 tw-text-white"
        fill="currentColor"
        viewBox="0 0 20 20"
      >
        <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
      </svg>
    </div>
    <div>
      <h1 class="tw-text-2xl tw-font-semibold tw-text-gray-900">
        Welcome to Task Dashboard
      </h1>
      <p class="tw-text-gray-600">Manage your projects efficiently</p>
    </div>
  </div>
</div>

<!-- Loading  -->
<div
  *ngIf="isLoading()"
  class="tw-flex tw-justify-center tw-py-8 tw-h-[70vh] tw-items-center"
>
  <div
    class="tw-animate-spin tw-rounded-full tw-h-6 tw-w-6 tw-border-b-2 tw-border-blue-500"
  ></div>
</div>

<div *ngIf="!isLoading()">
  <div class="tw-grid tw-gap-6 tw-p-2 sm:tw-p-6 tw-bg-gray-50"
  [ngClass]="{
    'tw-grid-cols-1': !taskPermissionsService.isAdminLevelPermission(),
    'tw-grid-cols-1 lg:tw-grid-cols-2': taskPermissionsService.isAdminLevelPermission()
  }"
  >
  <!-- Stats Cards -->
  <div
    class="tw-grid tw-gap-6 tw-p-6 tw-bg-gray-50 tw-h-fit"
    [ngClass]="{
    'tw-grid-cols-1': taskPermissionsService.isAdminLevelPermission(),
    'tw-grid-cols-1 md:tw-grid-cols-3': !taskPermissionsService.isAdminLevelPermission()
  }"
  >
    <div
      *ngIf="!taskPermissionsService.isAdminLevelPermission()"
      class="tw-bg-white tw-p-6 tw-rounded tw-shadow tw-border tw-border-gray-200 tw-h-fit"
    >
      <div class="tw-flex tw-items-center tw-justify-between">
        <div>
          <p class="tw-text-gray-500 tw-text-sm tw-font-medium">
            Completed Tasks
          </p>
          <p class="tw-text-2xl tw-font-semibold tw-text-gray-900 tw-mt-1">
            {{ dashboardStats.todaysCompletedTeamTasks }}
          </p>
        </div>
        <div
          class="tw-w-12 tw-h-12 tw-bg-green-50 tw-rounded tw-flex tw-items-center tw-justify-center"
        >
          <svg
            class="tw-w-6 tw-h-6 tw-text-green-600"
            fill="currentColor"
            viewBox="0 0 20 20"
          >
            <path
              fill-rule="evenodd"
              d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
            ></path>
          </svg>
        </div>
      </div>
    </div>

    <div
      *ngIf="!taskPermissionsService.isAdminLevelPermission()"
      class="tw-bg-white tw-p-6 tw-rounded tw-shadow tw-border tw-border-gray-200 tw-h-fit"
    >
      <div class="tw-flex tw-items-center tw-justify-between">
        <div>
          <p class="tw-text-gray-500 tw-text-sm tw-font-medium">
            Pending Tasks
          </p>
          <p class="tw-text-2xl tw-font-semibold tw-text-gray-900 tw-mt-1">
            {{ dashboardStats.todaysPendingTeamTasks }}
          </p>
        </div>
        <div
          class="tw-w-12 tw-h-12 tw-bg-orange-50 tw-rounded tw-flex tw-items-center tw-justify-center"
        >
          <svg
            class="tw-w-6 tw-h-6 tw-text-orange-600"
            fill="currentColor"
            viewBox="0 0 20 20"
          >
            <path
              fill-rule="evenodd"
              d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z"
            ></path>
          </svg>
        </div>
      </div>
    </div>

    <div
      *ngIf="taskPermissionsService.isAdminLevelPermission()"
      class="tw-bg-white tw-p-6 tw-rounded-lg tw-shadow-sm tw-border tw-border-gray-200 tw-transition-all tw-duration-200 hover:tw-shadow-md tw-h-fit"
    >
      <div class="tw-flex tw-items-start tw-justify-between">
        <div class="tw-flex-1">
          <div class="tw-flex tw-items-center tw-gap-2 tw-mb-3">
            <div
              class="tw-w-8 tw-h-8 tw-bg-green-50 tw-rounded-lg tw-flex tw-items-center tw-justify-center"
            >
              <svg
                class="tw-w-4 tw-h-4 tw-text-green-600"
                fill="currentColor"
                viewBox="0 0 20 20"
              >
                <path
                  fill-rule="evenodd"
                  d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                ></path>
              </svg>
            </div>
            <p class="tw-text-gray-700 tw-text-sm tw-font-medium">
              Completed Tasks
            </p>
          </div>

          <div class="tw-grid tw-grid-cols-2 tw-gap-4">
            <div class="tw-text-center tw-bg-gray-50 tw-rounded-lg tw-p-3">
              <div class="tw-text-xs tw-text-gray-500 tw-font-medium tw-mb-1">
                Personal
              </div>
              <div class="tw-text-2xl tw-font-bold tw-text-gray-900">
                {{ dashboardStats.todaysCompletedPersoalTasks }}
              </div>
            </div>
            <div class="tw-text-center tw-bg-green-50 tw-rounded-lg tw-p-3">
              <div class="tw-text-xs tw-text-gray-500 tw-font-medium tw-mb-1">
                Team
              </div>
              <div class="tw-text-2xl tw-font-bold tw-text-green-600">
                {{ dashboardStats.todaysCompletedTeamTasks }}
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div
      *ngIf="taskPermissionsService.isAdminLevelPermission()"
      class="tw-bg-white tw-p-6 tw-rounded-lg tw-shadow-sm tw-border tw-border-gray-200 tw-transition-all tw-duration-200 hover:tw-shadow-md tw-h-fit"
    >
      <div class="tw-flex tw-items-start tw-justify-between">
        <div class="tw-flex-1">
          <div class="tw-flex tw-items-center tw-gap-2 tw-mb-3">
            <div
              class="tw-w-8 tw-h-8 tw-bg-orange-50 tw-rounded-lg tw-flex tw-items-center tw-justify-center"
            >
              <svg
                class="tw-w-4 tw-h-4 tw-text-orange-600"
                fill="currentColor"
                viewBox="0 0 20 20"
              >
                <path
                  fill-rule="evenodd"
                  d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z"
                ></path>
              </svg>
            </div>
            <p class="tw-text-gray-700 tw-text-sm tw-font-medium">
              Pending Tasks
            </p>
          </div>

          <div class="tw-grid tw-grid-cols-2 tw-gap-4">
            <div class="tw-text-center tw-bg-gray-50 tw-rounded-lg tw-p-3">
              <div class="tw-text-xs tw-text-gray-500 tw-font-medium tw-mb-1">
                Personal
              </div>
              <div class="tw-text-2xl tw-font-bold tw-text-gray-900">
                {{ dashboardStats.todaysPendingPersoalTasks }}
              </div>
            </div>
            <div class="tw-text-center tw-bg-orange-50 tw-rounded-lg tw-p-3">
              <div class="tw-text-xs tw-text-gray-500 tw-font-medium tw-mb-1">
                Team
              </div>
              <div class="tw-text-2xl tw-font-bold tw-text-orange-600">
                {{ dashboardStats.todaysPendingTeamTasks }}
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div
      class="tw-bg-white tw-p-6 tw-rounded tw-shadow tw-border tw-border-gray-200 tw-h-fit"
    >
      <div class="tw-flex tw-items-center tw-justify-between">
        <div>
          <p class="tw-text-gray-500 tw-text-sm tw-font-medium">Total Boards</p>
          <p class="tw-text-2xl tw-font-semibold tw-text-gray-900 tw-mt-1">
            {{ dashboardStats.totalBoards }}
          </p>
        </div>
        <div
          class="tw-w-12 tw-h-12 tw-bg-blue-50 tw-rounded tw-flex tw-items-center tw-justify-center"
        >
          <svg
            class="tw-w-6 tw-h-6 tw-text-blue-600"
            fill="currentColor"
            viewBox="0 0 20 20"
          >
            <path
              d="M7 3a1 1 0 000 2h6a1 1 0 100-2H7zM4 7a1 1 0 011-1h10a1 1 0 110 2H5a1 1 0 01-1-1zM2 11a2 2 0 012-2h12a2 2 0 012 2v4a2 2 0 01-2 2H4a2 2 0 01-2-2v-4z"
            ></path>
          </svg>
        </div>
      </div>
    </div>

    <div
    *ngIf="taskPermissionsService.isAdminLevelPermission()"
      class="tw-bg-white tw-p-6 tw-rounded tw-shadow tw-border tw-border-gray-200 tw-h-fit"
    >
      <div class="tw-flex tw-items-center tw-justify-between">
        <div>
          <p class="tw-text-gray-500 tw-text-sm tw-font-medium">Team Members</p>
          <p class="tw-text-2xl tw-font-semibold tw-text-gray-900 tw-mt-1">
            {{ dashboardStats.totalTeamMembers }}
          </p>
        </div>
        <div
          class="tw-w-12 tw-h-12 tw-bg-purple-50 tw-rounded tw-flex tw-items-center tw-justify-center"
        >
          <svg
            class="tw-w-6 tw-h-6 tw-text-purple-600"
            fill="currentColor"
            viewBox="0 0 20 20"
          >
            <path
              d="M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"
            ></path>
          </svg>
        </div>
      </div>
    </div>
  </div>

  <!-- Recently Created Tasks -->
    <div
    *ngIf="taskPermissionsService.isAdminLevelPermission()"
      class="tw-bg-white tw-rounded tw-shadow tw-border tw-border-gray-200 tw-h-fit"
      
    >
      <div
        class="tw-flex tw-items-center tw-justify-between tw-p-6 tw-border-b tw-border-gray-200"
      >
        <h2 class="tw-text-lg tw-font-semibold tw-text-gray-900">
          Recently Tasks
        </h2>
        <span class="tw-text-sm tw-text-gray-500">{{ recentlyCreatedTasks.length }} tasks</span>
      </div>

      <div class="tw-divide-y tw-divide-gray-200 tw-min-h-[375px]">
        <div
          class="tw-flex tw-items-start tw-gap-4 tw-p-6"
          *ngFor="let task of recentlyCreatedTasks"
        >
          <div
            class="tw-p-2 tw-bg-blue-600 tw-rounded tw-flex tw-items-center tw-justify-center tw-mt-1"
          >
            <i class="fa-solid fa-plus tw-text-white tw-text-sm"></i>
          </div>
          <div class="tw-flex-1">
            <div class="tw-font-medium tw-text-gray-900 tw-line-clamp-1 tw-overflow-hidden tw-text-ellipsis tw-cursor-pointer hover:tw-text-blue-600"
                 (click)="navigateToTask(task, task.type)"
                 title="{{ task.title }}">
              {{ task.title }}
            </div>
            <p class="tw-text-gray-500 tw-text-sm tw-mt-1 tw-line-clamp-1 tw-overflow-hidden tw-text-ellipsis">
              {{ task.boardName }} • {{ task.createdBy.name }}
            </p>
            <div class="tw-flex tw-items-center tw-gap-2 tw-mt-2">
              <span
                class="tw-px-2 tw-py-1 tw-rounded tw-text-xs tw-font-medium"
                [class]="getStatusColorClass(task.status)"
              >
                {{ task.status }}
              </span>
              <span class="tw-text-xs tw-text-gray-400">
                {{ getTimeAgo(task.createdAt) }}
              </span>
            </div>
          </div>
        </div>

        <div
          class="tw-p-6 tw-flex tw-items-center tw-justify-center tw-text-sm tw-text-gray-500"
          *ngIf="!recentlyCreatedTasks.length"
        >
          No recently created tasks
        </div>
      </div>
    </div>
  </div>

  <!-- Main Content Area -->
  <div
    class="tw-grid tw-grid-cols-1 lg:tw-grid-cols-2 2xl:tw-grid-cols-3 tw-gap-6 tw-p-2 sm:tw-p-6 tw-bg-gray-50"
  >
    <!-- Recent Activities -->
    <!-- <div
      class="tw-bg-white tw-rounded tw-shadow tw-border tw-border-gray-200 tw-h-fit"
    >
      <div
        class="tw-flex tw-items-center tw-justify-between tw-p-6 tw-border-b tw-border-gray-200"
      >
        <h2 class="tw-text-lg tw-font-semibold tw-text-gray-900">
          Recent Activities
        </h2>
        <span class="tw-text-sm tw-text-gray-500">{{ recentActivities.length }} activities</span>
      </div>

      <div class="tw-divide-y tw-divide-gray-200 tw-min-h-[375px]">
        <div
          class="tw-flex tw-items-start tw-gap-4 tw-p-6"
          *ngFor="let activity of recentActivities"
        >
          <div
            class="tw-p-2 tw-rounded tw-flex tw-items-center tw-justify-center tw-mt-1"
            [class]="getActivityColor(activity)"
          >
            <i class="fa-solid tw-text-white tw-text-sm" [class]="getActivityIcon(activity)"></i>
          </div>
          <div class="tw-flex-1">
            <div class="tw-flex tw-items-center tw-gap-2 tw-mb-1">
              <span class="tw-font-medium tw-text-gray-900">{{ activity.user.name }}</span>
              <span class="tw-text-gray-500">{{ activity.action }}</span>
              <span class="tw-text-gray-900 tw-font-medium tw-cursor-pointer hover:tw-text-blue-600" 
                    (click)="navigateToTask(activity.taskId, activity.type)">
                {{ activity.title }}
              </span>
            </div>
            <p class="tw-text-gray-500 tw-text-sm tw-mb-1">
              {{ activity.boardName }}
            </p>
            <p class="tw-text-xs tw-text-gray-400">
              {{ getTimeAgo(activity.timestamp) }}
            </p>
          </div>
        </div>

        <div
          class="tw-p-6 tw-flex tw-items-center tw-justify-center tw-text-sm tw-text-gray-500"
          *ngIf="!recentActivities.length"
        >
          No recent activities
        </div>
      </div>
    </div> -->

    <!-- Recent personal Tasks -->
    <div
      class="tw-bg-white tw-rounded tw-shadow tw-border tw-border-gray-200 tw-h-fit"
      *ngIf="taskPermissionsService.isAdminLevelPermission()"
    >
      <div
        class="tw-flex tw-items-center tw-justify-between tw-p-6 tw-border-b tw-border-gray-200"
      >
        <h2 class="tw-text-lg tw-font-semibold tw-text-gray-900">
          Recent Personal Tasks
        </h2>
        <button
          class="tw-bg-blue-600 tw-text-white tw-px-4 tw-py-2 tw-rounded tw-text-sm tw-font-medium tw-hover:tw-bg-blue-700"
          (click)="router.navigate(['task-management/personal-task/my-day'])"
        >
          View All
        </button>
      </div>

      <div class="tw-divide-y tw-divide-gray-200 tw-min-h-[375px]">
        <div
          class="tw-flex tw-items-center tw-gap-4 tw-p-6"
          *ngFor="let task of dashboardStats.recentPersonalTasks"
        >
          <div
            class="tw-p-2 tw-bg-red-600 tw-rounded tw-flex tw-items-center tw-justify-center"
          >
            <i class="fa-solid fa-calendar-days tw-text-white"></i>
          </div>
          <div class="tw-flex-1">
            <div
              class="tw-font-medium tw-text-gray-900 tw-line-clamp-1 tw-overflow-hidden tw-text-ellipsis"
              title="{{ task.title }}"
            >
              {{ task.title }}
            </div>
            <p
              class="tw-text-gray-500 tw-text-sm tw-mt-1 tw-line-clamp-1 tw-overflow-hidden tw-text-ellipsis"
            >
              • Due: {{ getTime(task.dueOn) }}
            </p>
          </div>
        </div>

        <div
          class="tw-p-6 tw-flex tw-items-center tw-justify-center tw-text-sm tw-text-gray-500"
          *ngIf="!dashboardStats.recentPersonalTasks.length"
        >
          No recent tasks
        </div>
      </div>
    </div>

    <!-- Recent Team Tasks -->
    <div
      class="tw-bg-white tw-rounded tw-shadow tw-border tw-border-gray-200 2xl:tw-col-span-2 tw-h-fit"
    >
      <div
        class="tw-flex tw-items-center tw-justify-between tw-p-6 tw-border-b tw-border-gray-200"
      >
        <h2 class="tw-text-lg tw-font-semibold tw-text-gray-900">
          Recent Team Tasks
        </h2>
        <button
          class="tw-bg-blue-600 tw-text-white tw-px-4 tw-py-2 tw-rounded tw-text-sm tw-font-medium tw-hover:tw-bg-blue-700"
          (click)="showAllTasks()"
        >
          View All
        </button>
      </div>

      <div class="tw-divide-y tw-divide-gray-200 tw-min-h-[375px]">
        <div
          class="tw-flex tw-items-center tw-gap-4 tw-p-6"
          *ngFor="let task of dashboardStats.recentTeamTasks"
        >
          <div
            class="tw-p-2 tw-bg-orange-600 tw-rounded tw-flex tw-items-center tw-justify-center"
          >
            <svg
              class="tw-w-4 tw-h-4 tw-text-white"
              fill="currentColor"
              viewBox="0 0 20 20"
            >
              <path
                fill-rule="evenodd"
                d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z"
              ></path>
            </svg>
          </div>
          <div class="tw-flex-1">
            <div
              class="tw-font-medium tw-text-gray-900 tw-line-clamp-1 tw-overflow-hidden tw-text-ellipsis"
              title="{{ task.title }}"
            >
              {{ task.title }}
            </div>
            <p
              class="tw-text-gray-500 tw-text-sm tw-mt-1 tw-line-clamp-1 tw-overflow-hidden tw-text-ellipsis"
              title="{{ task?.board?.name || 'N/A' }}"
            >
              {{ task?.board?.name || "N/A" }}
            </p>
          </div>
          <span
            class="tw-px-2 tw-py-1 tw-rounded tw-text-xs tw-font-medium"
            [class]="getStatusColorClass(task.status)"
            >{{ task.status }}</span
          >
        </div>

        <div
          class="tw-p-6 tw-flex tw-items-center tw-justify-center tw-text-sm tw-text-gray-500"
          *ngIf="!dashboardStats.recentTeamTasks.length"
        >
          No recent tasks
        </div>
      </div>
    </div>
    

    <!-- Sidebar -->
    <div class="tw-space-y-6">
      <!-- Quick Actions -->
      <!-- <div
        class="tw-bg-white tw-rounded tw-shadow tw-border tw-border-gray-200"
      >
        <div class="tw-p-6 tw-border-b tw-border-gray-200">
          <h2 class="tw-text-lg tw-font-semibold tw-text-gray-900">
            Quick Actions
          </h2>
        </div>
        <div class="tw-p-6 tw-space-y-3">
          <button
          *ngIf="taskPermissionsService.isAdminLevelPermission()"
            class="tw-w-full tw-bg-blue-600 tw-text-white tw-py-2 tw-px-4 tw-rounded tw-text-sm tw-font-medium tw-hover:tw-bg-blue-700"
          >
            <div class="tw-flex tw-items-center tw-justify-center tw-gap-2">
              <i class="fa-solid fa-rocket"></i>
              Start With AI
            </div>
          </button>

          <button
            class="tw-w-full tw-bg-gray-100 tw-text-gray-700 tw-py-2 tw-px-4 tw-rounded tw-text-sm tw-font-medium tw-hover:tw-bg-gray-200"
            (click)="router.navigate(['task-management/boards'])"
          >
            <div class="tw-flex tw-items-center tw-justify-center tw-gap-2">
              <i class="fa-solid fa-chart-pie"></i>
              All boards
            </div>
          </button>

          <button
          *ngIf="taskPermissionsService.isAdminLevelPermission()"
            class="tw-w-full tw-bg-gray-100 tw-text-gray-700 tw-py-2 tw-px-4 tw-rounded tw-text-sm tw-font-medium tw-hover:tw-bg-gray-200"
            (click)="router.navigate(['task-management/allmembers'])"
          >
            <div class="tw-flex tw-items-center tw-justify-center tw-gap-2">
              <i class="fa-solid fa-user-group"></i>
              All members
            </div>
          </button>
          <button
            class="tw-w-full tw-bg-gray-100 tw-text-gray-700 tw-py-2 tw-px-4 tw-rounded tw-text-sm tw-font-medium tw-hover:tw-bg-gray-200"
            (click)="router.navigate(['task-management/teamtask'])"
          >
            <div class="tw-flex tw-items-center tw-justify-center tw-gap-2">
              <i class="fa-solid fa-list-check"></i>
              Team Task
            </div>
          </button>
        </div>
      </div> -->
    </div>
  </div>

  <!-- Employee Day-wise Task Details Table -->
  <div class="tw-p-6 tw-bg-gray-50" *ngIf="taskPermissionsService.isAdminLevelPermission()">
    <div class="tw-bg-white tw-rounded-lg tw-shadow tw-border tw-border-gray-200">
      <div class="tw-flex tw-items-center tw-justify-between tw-p-6 tw-border-b tw-border-gray-200">
        <h2 class="tw-text-xl tw-font-semibold tw-text-gray-900">
          Employee Day-wise Task Details
        </h2>
        <div class="tw-flex tw-items-center tw-gap-4">
          <label class="tw-text-sm tw-font-medium tw-text-gray-700">Select Date:</label>
          <input
            type="date"
            [(ngModel)]="selectedDate"
            (change)="onDateChange()"
            class="tw-border tw-border-gray-300 tw-rounded-md tw-px-3 tw-py-2 tw-text-sm focus:tw-outline-none focus:tw-ring-2 focus:tw-ring-blue-500 focus:tw-border-transparent"
          />
        </div>
      </div>

      <div class="tw-overflow-x-auto">
        <table class="tw-min-w-full tw-divide-y tw-divide-gray-200">
          <thead class="tw-bg-gray-50">
            <tr>
              <th class="tw-px-6 tw-py-3 tw-text-left tw-text-xs tw-font-medium tw-text-gray-500 tw-uppercase tw-tracking-wider">
                Employee
              </th>
              <th class="tw-px-6 tw-py-3 tw-text-left tw-text-xs tw-font-medium tw-text-gray-500 tw-uppercase tw-tracking-wider">
                Today's Due Tasks
              </th>
              <th class="tw-px-6 tw-py-3 tw-text-left tw-text-xs tw-font-medium tw-text-gray-500 tw-uppercase tw-tracking-wider">
                Status-wise Tasks
              </th>
              <th class="tw-px-6 tw-py-3 tw-text-left tw-text-xs tw-font-medium tw-text-gray-500 tw-uppercase tw-tracking-wider">
                Completed
              </th>
              <th class="tw-px-6 tw-py-3 tw-text-left tw-text-xs tw-font-medium tw-text-gray-500 tw-uppercase tw-tracking-wider">
                Deleted
              </th>
              <!-- <th class="tw-px-6 tw-py-3 tw-text-left tw-text-xs tw-font-medium tw-text-gray-500 tw-uppercase tw-tracking-wider">
                Created Today
              </th>
              <th class="tw-px-6 tw-py-3 tw-text-left tw-text-xs tw-font-medium tw-text-gray-500 tw-uppercase tw-tracking-wider">
                Personal Tasks
              </th>
              <th class="tw-px-6 tw-py-3 tw-text-left tw-text-xs tw-font-medium tw-text-gray-500 tw-uppercase tw-tracking-wider">
                Total
              </th> -->
            </tr>
          </thead>
          <tbody class="tw-bg-white tw-divide-y tw-divide-gray-200">
            <tr *ngFor="let employee of employeeTaskDetails" class="hover:tw-bg-gray-50">
              <td class="tw-px-6 tw-py-4 tw-whitespace-nowrap">
                <div class="tw-flex tw-items-center">
                  <div class="tw-flex-shrink-0 tw-h-10 tw-w-10">
                    <img
                      class="tw-h-10 tw-w-10 tw-rounded-full tw-object-cover"
                      [src]="imageBaseUrl + employee.employee.profileImage"
                      [alt]="employee.employee.name"
                                             onerror="this.src='/assets/images/avatar.png'"
                    />
                  </div>
                  <div class="tw-ml-4">
                    <div class="tw-text-sm tw-font-medium tw-text-gray-900">
                      {{ employee.employee.name }}
                    </div>
                    <div class="tw-text-sm tw-text-gray-500">
                      {{ employee.employee.role }}
                    </div>
                  </div>
                </div>
              </td>
              <td class="tw-px-6 tw-py-4 tw-whitespace-nowrap">
                <span class="tw-text-sm tw-text-gray-900 tw-font-medium">
                  {{ employee.todaysDueTasksCount }}
                </span>
              </td>
              <td class="tw-px-6 tw-py-4 tw-whitespace-nowrap">
                <div class="tw-flex tw-flex-wrap tw-gap-1">
                  <span *ngFor="let status of ['normal', 'ready', 'in progress', 'need review', 'need rework', 'on hold', 'blocked']"
                        class="tw-px-2 tw-py-1 tw-text-xs tw-rounded-full"
                        [class]="getStatusColorClass(status)">
                    {{ status }}: {{ getStatusCount(employee.statusWiseTasks, status) }}
                  </span>
                </div>
              </td>
              <td class="tw-px-6 tw-py-4 tw-whitespace-nowrap">
                <span class="tw-text-sm tw-text-green-600 tw-font-medium">
                  {{ employee.completedTaskCount }}
                </span>
              </td>
              <td class="tw-px-6 tw-py-4 tw-whitespace-nowrap">
                <span class="tw-text-sm tw-text-red-600 tw-font-medium">
                  {{ employee.deletedTaskCount }}
                </span>
              </td>
              <!-- <td class="tw-px-6 tw-py-4 tw-whitespace-nowrap">
                <span class="tw-text-sm tw-text-blue-600 tw-font-medium">
                  {{ employee.tasksCreatedByEmployee }}
                </span>
              </td>
              <td class="tw-px-6 tw-py-4 tw-whitespace-nowrap">
                <div class="tw-text-sm tw-text-gray-900">
                  <div>Due: {{ employee.personalTasksCount }}</div>
                  <div class="tw-text-green-600">Completed: {{ employee.personalCompletedCount }}</div>
                </div>
              </td>
              <td class="tw-px-6 tw-py-4 tw-whitespace-nowrap">
                <span class="tw-text-sm tw-text-gray-900 tw-font-bold">
                  {{ employee.totalTasksForToday }}
                </span>
              </td> -->
            </tr>
          </tbody>
        </table>
      </div>

      <div
        class="tw-p-6 tw-flex tw-items-center tw-justify-center tw-text-sm tw-text-gray-500"
        *ngIf="!employeeTaskDetails.length"
      >
        No employee data available for the selected date
      </div>
    </div>
  </div>
</div>


