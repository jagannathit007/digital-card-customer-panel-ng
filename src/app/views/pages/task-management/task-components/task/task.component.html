<!-- <div class="task-container">
  <router-outlet></router-outlet>
  <app-aiassistant *ngIf="isAdmin"></app-aiassistant>
   <app-add-team-member></app-add-team-member>

</div> -->


<div class="task-container">
  <router-outlet></router-outlet>
  <app-calendar-sync *ngIf="isAdmin"></app-calendar-sync>

  
  <app-aiassistant *ngIf="isAdmin"></app-aiassistant>
  
  <!-- chandan - Add team member modal - only show when triggered -->
  <app-add-team-member 
    *ngIf="isAddTeamMemberModalOpen"
    [prefilledData]="currentModalData"
    (closeModalEvent)="onAddTeamMemberModalClose()"
    (memberAdded)="onTeamMemberAdded($event)">
  </app-add-team-member>

  <!--  ! Personal task Creation modal -->
  <app-task-timer
    *ngIf="isTaskClockModalOpen"
    [isVisible]="isTaskClockModalOpen"
    [mode]="'add'"
    [taskId]="''"
    [currentDueDate]="taskClockModalData?.dueOn"
    [currentTaskTitle]="taskClockModalData?.task_title || taskClockModalData?.title || ''"
    (onClose)="onTaskClockModalClose()"
    (onTaskAdded)="onTaskAdded()">
  </app-task-timer>

  <!-- team task creation -->
   <app-common-team-task-create-popup
   *ngIf="isTeamTaskCreationModalOpen"
   [isVisible]="isTeamTaskCreationModalOpen"
   [createBoardData]="currentModalData"
   (popupClosed)="onTeamTaskCreationModalClose()"
   (taskCreated)="onTeamMemberAdded($event)"
   ></app-common-team-task-create-popup>
  
  <!-- chandan - Placeholder for other modals when they are created -->
  <!-- 
  <app-report-generation
    *ngIf="isReportGenerationModalOpen"
    [prefilledData]="currentModalData"
    (closeModalEvent)="onReportGenerationModalClose()">
  </app-report-generation>
  
  <app-team-task-creation
    *ngIf="isTeamTaskCreationModalOpen"
    [prefilledData]="currentModalData"
    (closeModalEvent)="onTeamTaskCreationModalClose()">
  </app-team-task-creation>
  
  <app-personal-task-creation
    *ngIf="isPersonalTaskCreationModalOpen"
    [prefilledData]="currentModalData"
    (closeModalEvent)="onPersonalTaskCreationModalClose()">
  </app-personal-task-creation>
  -->
</div>

<!-- some changes is detected please refresh the page warning refresh toast with refresh button -->
<div class="tw-fixed tw-top-20 tw-left-0 tw-right-0 tw-text-sm tw-flex tw-justify-center tw-items-center tw-z-50" *ngIf="isRefreshWarningToastOpened">
  <div class="tw-flex tw-items-center tw-bg-orange-100 tw-text-orange-800 tw-px-4 tw-py-2 tw-rounded tw-shadow-md">
    <i class="fas fa-exclamation-triangle tw-mr-2"></i>
    <span>Some changes are detected. Please refresh the page.</span>
    <div class="tw-ml-2 tw-flex tw-items-center">
      <span class="tw-mr-2">Refreshing in {{countdown}}s</span>
      <button class="tw-text-blue-500 hover:tw-text-blue-700" (click)="refreshPage()">Refresh Now</button>
    </div>
  </div>
</div>

<!-- Mention notification toast -->
<div class="tw-fixed tw-top-20 tw-right-4 tw-text-sm tw-z-50" *ngIf="isMentionToastVisible" @fadeInOut
     (mouseenter)="pauseToastTimer()" (mouseleave)="resumeToastTimer()">
  <div class="tw-flex tw-items-center tw-bg-blue-100 tw-text-blue-800 tw-px-4 tw-py-2 tw-rounded tw-shadow-md">
    <i class="fas fa-at tw-mr-2"></i>
    <span class="tw-cursor-pointer" (click)="navigateToMentionedTask()">You've been mentioned in a comment!</span>
    <button class="tw-ml-2 tw-text-blue-500 hover:tw-text-blue-700 tw-bg-transparent tw-border-none tw-cursor-pointer"
            (click)="closeMentionToast()">
      <i class="fas fa-times"></i>
    </button>
  </div>
</div>

<!-- Compenent for profile data fillup  -->
<app-customdata></app-customdata>